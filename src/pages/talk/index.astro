---
import Pagination from "@/components/widgets/Pagination.astro";
import TalkList from "@/components/widgets/TalkList.astro";
import { themeConfig } from "@/config";
import { defaultLocale, getTranslations } from "@/i18n";
import IndexLayout from "@/layouts/IndexLayout.astro";
import { getTalksByYear } from "@/utils/i18n-talk-content";

const locale = defaultLocale;
const t = getTranslations(locale);
const yearGroups = await getTalksByYear(locale);

// Year-based pagination: each page = one year
const totalPages = yearGroups.length;
const currentPage = 1;
const currentYearGroup = yearGroups[0]; // First year = page 1

const pageTitle = `${t.ui.talk} - ${themeConfig.site.title}`;
---

<IndexLayout title={pageTitle} description={t.ui.talkDescription} locale={locale}>
  <div class="talk-page" data-pagefind-ignore="all">
    <h1 class="page-title">{t.ui.talk}</h1>
    <TalkList yearGroups={[currentYearGroup]} locale={locale} />
    {totalPages > 1 && (
      <Pagination currentPage={currentPage} totalPages={totalPages} locale={locale} basePath="/talk" />
    )}
  </div>
</IndexLayout>

<style>
  .talk-page {
    margin-top: 1.25rem;
  }

  .page-title {
    font-size: var(--heading-1);
    font-weight: var(--font-weight-bold);
    margin: 0 0 1.5rem 0;
  }
</style>
